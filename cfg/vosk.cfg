# Configuration for Vosk Speech-to-Text engine

[vosk]
# WebSocket URL to connect to the Vosk server
# When using Docker, connect to the container by name
ws_url = ws://172.17.0.3:2700

# Sample rate of the audio (should match the model used by Vosk)
# Telephony typically uses 8kHz
sample_rate = 16000

max_queue_size = 100
# VAD (Voice Activity Detection) settings
use_vad = true

# WebRTC VAD settings
vad_aggressiveness = 2      # 0-3, higher values are more aggressive (less sensitive)
silence_frames_threshold = 10  # Number of consecutive silent frames to consider end of speech
speech_frames_threshold = 3    # Number of consecutive speech frames to consider start of speech

# Barge-in settings (interrupting TTS with speech)
enable_barge_in = true      # Enable or disable barge-in functionality
barge_in_threshold = 5      # Number of speech frames needed to trigger barge-in

# Legacy VAD settings (kept for backward compatibility)
silence_threshold = 500     # Number of consecutive silent frames to consider end of speech (legacy)
speech_threshold = 300      # Energy threshold to consider audio as speech (legacy)

# Connection settings
reconnect_delay = 5         # Seconds to wait between reconnection attempts
max_reconnect_attempts = 3

# Debugging
buffer_audio = false        # Whether to buffer audio for debugging/saving

# Matching patterns for this engine
# Calls to these URIs will use the Vosk engine
match = ^vosk.*$ 