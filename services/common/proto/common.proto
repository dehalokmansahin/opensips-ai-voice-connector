syntax = "proto3";

package opensips.ai.common;

// Common message types used across all services

// Health check messages
message HealthCheckRequest {
  string service = 1;
}

message HealthCheckResponse {
  enum ServingStatus {
    UNKNOWN = 0;
    SERVING = 1;
    NOT_SERVING = 2;
    SERVICE_UNKNOWN = 3;
  }
  ServingStatus status = 1;
}

// Common error response
message ErrorResponse {
  int32 code = 1;
  string message = 2;
  string details = 3;
}

// Audio data format
message AudioData {
  bytes data = 1;
  int32 sample_rate = 2;
  int32 channels = 3;
  string format = 4; // "wav", "pcm", etc.
}

// Text data with metadata
message TextData {
  string text = 1;
  string language = 2;
  float confidence = 3;
}

// Session information
message SessionInfo {
  string session_id = 1;
  string conversation_id = 2;
  int64 timestamp = 3;
}

// Service status
message ServiceStatus {
  string service_name = 1;
  bool is_healthy = 2;
  string version = 3;
  int64 uptime_seconds = 4;
  map<string, string> metadata = 5;
}

// Common status message
message Status {
  int32 code = 1;
  string message = 2;
  bool success = 3;
  string error_detail = 4;
}

// Conversation context
message ConversationContext {
  string session_id = 1;
  string conversation_id = 2;
  string customer_id = 3;
  map<string, string> attributes = 4;
  int32 turn_count = 5;
  int64 created_at = 6;
  int64 updated_at = 7;
}

// Banking intent information
message BankingIntent {
  string intent_name = 1;
  float confidence = 2;
  map<string, string> entities = 3;
  string category = 4;
  bool requires_auth = 5;
}

// Customer information
message CustomerInfo {
  string customer_id = 1;
  string account_number = 2;
  string name = 3;
  string phone = 4;
  bool authenticated = 5;
  map<string, string> profile = 6;
}